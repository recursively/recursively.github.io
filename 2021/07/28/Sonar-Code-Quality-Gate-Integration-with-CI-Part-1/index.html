<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/hive-apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/hive-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/hive-16x16.png">
  <link rel="mask-icon" href="/images/hive.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"recursively.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Basically, there are a couple of approaches to handle the code quality checking in different stage, such as pre-commit, pre-merge and post-merge. This post is to state the code quality checking proces">
<meta property="og:type" content="article">
<meta property="og:title" content="Sonar Code Quality Gate Integration with CI - Part 1">
<meta property="og:url" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/index.html">
<meta property="og:site_name" content="Mountaineer &amp; Hiker YHZ&#39;s Daily">
<meta property="og:description" content="Basically, there are a couple of approaches to handle the code quality checking in different stage, such as pre-commit, pre-merge and post-merge. This post is to state the code quality checking proces">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_1.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_2.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_3.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_4.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_5.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_6.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_7.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_8.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_9.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_10.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_15.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_11.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_12.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_13.png">
<meta property="og:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_14.png">
<meta property="article:published_time" content="2021-07-28T17:19:02.000Z">
<meta property="article:modified_time" content="2024-01-02T04:51:03.615Z">
<meta property="article:author" content="YHZ">
<meta property="article:tag" content="sonarqube">
<meta property="article:tag" content="sonar-scanner">
<meta property="article:tag" content="Jenkins">
<meta property="article:tag" content="Gitlab">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_1.png">

<link rel="canonical" href="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Sonar Code Quality Gate Integration with CI - Part 1 | Mountaineer & Hiker YHZ's Daily</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130244347-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-130244347-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?c5a2712bf7c73d87374b33356ead82b0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Mountaineer & Hiker YHZ's Daily" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mountaineer & Hiker YHZ's Daily</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">This is a personal blog along with other stuff.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-view">

    <a href="/globe/" rel="section"><i class="fa fa-eye fa-fw"></i>View</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/recursively" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://recursively.github.io/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hive.gif">
      <meta itemprop="name" content="YHZ">
      <meta itemprop="description" content="LEARNING, TRAVELING, ENJOYING">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mountaineer & Hiker YHZ's Daily">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Sonar Code Quality Gate Integration with CI - Part 1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-28 17:19:02" itemprop="dateCreated datePublished" datetime="2021-07-28T17:19:02+00:00">2021-07-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-01-02 04:51:03" itemprop="dateModified" datetime="2024-01-02T04:51:03+00:00">2024-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SAST/" itemprop="url" rel="index"><span itemprop="name">SAST</span></a>
                </span>
            </span>

          
            <div class="post-description">Basically, there are a couple of approaches to handle the code quality checking in different stage, such as pre-commit, pre-merge and post-merge. This post is to state the code quality checking process and the integration with CI in the pre-merge stage, which is usually known as quality gate.</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Why-Sonar"><a href="#Why-Sonar" class="headerlink" title="Why Sonar"></a>Why Sonar</h2><p>There are a lot of SAST tools on the market, such as Fortify, Coverity, Infer and so on. We choose Sonar because of its open-source(partially), convenient-to-deployed, customization-friendly properties.</p>
<h2 id="About-CI"><a href="#About-CI" class="headerlink" title="About CI"></a>About CI</h2><p>For the CI system, we’re gonna talk about two platforms:</p>
<ul>
<li>Jenkins CI</li>
<li>Gitlab CI</li>
</ul>
<p>The Jenkis CI is a third-party CI system and Gitlab CI is originated from Gitlab on the contrary. The deployment experience on both platforms can be applied to other situations.</p>
<h2 id="Trigger-A-Gitlab-Pipeline-Separatly"><a href="#Trigger-A-Gitlab-Pipeline-Separatly" class="headerlink" title="Trigger A Gitlab Pipeline Separatly"></a>Trigger A Gitlab Pipeline Separatly</h2><p>There are three steps to accomplish this: </p>
<ul>
<li>Set up Gitlab runner</li>
<li>Register a runner for your project</li>
<li>Create the <em>.gitlab-ci.yml</em> file in your project</li>
</ul>
<p>Go to Settings &gt; CI/CD and expand Runners to see if you have available runners. You could notice that there’s a token listed on the board, it will be used for the gitlab-runner configuration later. If no runners are listed on the page you must install Gitlab runner:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gitlab-runner</span><br></pre></td></tr></table></figure>
<p>After that, you need to register a runner to perform your task:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gitlab-runner register</span><br></pre></td></tr></table></figure>
<p>You need to enter some information the runner requires to finish the registration:</p>
<ul>
<li>Enter your GitLab instance URL.</li>
<li>Enter the token you obtained to register the runner.</li>
<li>Enter a description for the runner. You can change this value later in the GitLab user interface.</li>
<li>Enter the tags associated with the runner, separated by commas. You can change this value later in the GitLab user interface. Please note that if you don’t want your runner’s tags associated with the ones you defined in Gitlab, you can modify the configuration in the runner’s setting panel.</li>
</ul>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_1.png" width="100%" height="100%">

<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_2.png" width="100%" height="100%">

<ul>
<li>Provide the runner executor. For most use cases, enter docker.</li>
<li>If you entered docker as your executor, you’ll be asked for the default image to be used for projects that do not define one in .gitlab-ci.yml. If you don’t want the docker as the executor to pull images every time, you need to add the <em>pull_policy</em> parameter in the configuration file: <em>/etc/gitlab-runner/config.toml</em><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">concurrent</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">check_interval</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="section">[session_server]</span></span><br><span class="line">  <span class="attr">session_timeout</span> = <span class="number">1800</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[runners]]</span></span><br><span class="line">  <span class="attr">name</span> = <span class="string">&quot;CI test project&quot;</span></span><br><span class="line">  <span class="attr">url</span> = <span class="string">&quot;http://172.20.1.135&quot;</span></span><br><span class="line">  <span class="attr">token</span> = <span class="string">&quot;Your project token&quot;</span></span><br><span class="line">  <span class="attr">executor</span> = <span class="string">&quot;docker&quot;</span></span><br><span class="line">  <span class="section">[runners.custom_build_dir]</span></span><br><span class="line">  <span class="section">[runners.cache]</span></span><br><span class="line">    <span class="section">[runners.cache.s3]</span></span><br><span class="line">    <span class="section">[runners.cache.gcs]</span></span><br><span class="line">    <span class="section">[runners.cache.azure]</span></span><br><span class="line">  <span class="section">[runners.docker]</span></span><br><span class="line">    <span class="attr">tls_verify</span> = <span class="literal">false</span></span><br><span class="line">    <span class="attr">image</span> = <span class="string">&quot;ubuntu:latest&quot;</span></span><br><span class="line">    <span class="attr">privileged</span> = <span class="literal">false</span></span><br><span class="line">    <span class="attr">disable_entrypoint_overwrite</span> = <span class="literal">false</span></span><br><span class="line">    <span class="attr">oom_kill_disable</span> = <span class="literal">false</span></span><br><span class="line">    <span class="attr">disable_cache</span> = <span class="literal">false</span></span><br><span class="line">    <span class="attr">volumes</span> = [<span class="string">&quot;/cache&quot;</span>]</span><br><span class="line">    <span class="attr">shm_size</span> = <span class="number">0</span></span><br><span class="line">    <span class="attr">pull_policy</span> = <span class="string">&quot;if-not-present&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>The last step is to create the <em>.gitlab-ci.yml</em> file which is used to trigger your Gitlab pipeline. In this file, you define:</p>
<ul>
<li>The structure and order of jobs that the runner should execute.</li>
<li>The decisions the runner should make when specific conditions are encountered.</li>
</ul>
<p>Now that most of the configuration is set up. Let’s have a try to trigger the Gitlab CI job by pushing our code to the remote repository.</p>
<p>Create two simple c files which has these vulnerable code:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    x=<span class="number">121</span>/<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y=<span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>];</span><br><span class="line">    x=a[y];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile</span></span><br><span class="line"><span class="section">all: test1 test2</span></span><br><span class="line"></span><br><span class="line"><span class="section">test1:</span></span><br><span class="line">        gcc -o vuln.o vuln.c</span><br><span class="line"></span><br><span class="line"><span class="section">test2:</span></span><br><span class="line">        gcc -o vuln2.o vuln2.c</span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">        rm vuln*.o</span><br></pre></td></tr></table></figure>

<p>Then add these content to the <em>.gitlab-ci.yml</em> file:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build-job:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apt</span> <span class="string">update</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apt</span> <span class="string">install</span> <span class="string">gcc</span> <span class="string">make</span> <span class="string">-y</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Starting up the building process!&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">make</span></span><br></pre></td></tr></table></figure>
<p>You can definitely build your own images without installing packages every time, which will save a lot of building time. Now you can commit and push your project to the remote repository to trigger the CI pipeline job. You can get the build status after a while.</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_3.png" width="100%" height="100%">

<p>And you can also check the build details if you will:</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_4.png" width="100%" height="100%">

<h2 id="Trigger-A-Jenkins-Pipeline-Separatly"><a href="#Trigger-A-Jenkins-Pipeline-Separatly" class="headerlink" title="Trigger A Jenkins Pipeline Separatly"></a>Trigger A Jenkins Pipeline Separatly</h2><p>The Jenkins pipeline task is mentioned in another post: <a target="_blank" rel="noopener" href="https://recursively.review/2021/08/04/Sonar-Code-Quality-Gate-Integration-with-CI-Part-2/">https://recursively.review/2021/08/04/Sonar-Code-Quality-Gate-Integration-with-CI-Part-2/</a></p>
<h2 id="Trigger-A-Sonar-Scanning-Task-Separatly"><a href="#Trigger-A-Sonar-Scanning-Task-Separatly" class="headerlink" title="Trigger A Sonar Scanning Task Separatly"></a>Trigger A Sonar Scanning Task Separatly</h2><p>Now it’s time to use Sonarqube to perform the code quality scanning. To accomplish that, we need to set up both Sonarqube and Sonar-scanner environment. First and foremost, create the Sonarqube server environment, it’s easily to do that with a docker image:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name sonarqube -e SONAR_ES_BOOTSTRAP_CHECKS_DISABLE=true -p 9000:9000 sonarqube:latest</span><br></pre></td></tr></table></figure>
<p>When it’s finished, you can access the Sonarqube web UI server through the browser. Let’s create a scanning project and fill in these blank area. </p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_5.png" width="100%" height="100%">

<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_6.png" width="100%" height="100%">

<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_7.png" width="100%" height="100%">

<p>Since the community version of Sonarqube doesn’t support the scanning for C/C++ code, we have to install plugins to enable the C/C++ checking rule. Sonar-cxx(<a target="_blank" rel="noopener" href="https://github.com/SonarOpenCommunity/sonar-cxx">https://github.com/SonarOpenCommunity/sonar-cxx</a>) is a nice tool which has many sensors for reading reports generated by other scanning tools such as cppcheck and infer.</p>
<p>Here we use cppcheck to find the flaws in our code:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install cppcheck</span><br><span class="line"></span><br><span class="line">cppcheck --xml --xml-version=2 --enable=all ./ 2&gt; cppcheck-report.xml</span><br></pre></td></tr></table></figure>

<p>Create a configuration file in your project’s root directory called <em>sonar-project.properties</em>, and add some configuration for cxx plugin:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># must be unique in a given SonarQube instance</span></span><br><span class="line"><span class="attr">sonar.projectKey</span>=test</span><br><span class="line"></span><br><span class="line"><span class="comment"># --- optional properties ---</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># defaults to project key</span></span><br><span class="line"><span class="comment">#sonar.projectName=My project</span></span><br><span class="line"><span class="comment"># defaults to &#x27;not provided&#x27;</span></span><br><span class="line"><span class="comment">#sonar.projectVersion=1.0</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Path is relative to the sonar-project.properties file. Defaults to .</span></span><br><span class="line"><span class="comment">#sonar.sources=.</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Encoding of the source code. Default is default system encoding</span></span><br><span class="line"><span class="comment">#sonar.sourceEncoding=UTF-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mandatory: files to be handled by the _cxx plugin_</span></span><br><span class="line"><span class="attr">sonar.cxx.file.suffixes</span>=.h,.cpp,.c</span><br><span class="line"></span><br><span class="line"><span class="attr">sonar.cxx.cppcheck.reportPaths</span>=cppcheck-report.xml</span><br></pre></td></tr></table></figure>

<p>Now we can start a Sonar-scanner job to perform our code scanning.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run \</span><br><span class="line">    --rm \</span><br><span class="line">    -e SONAR_HOST_URL=&quot;http://172.20.1.135:9000&quot; \</span><br><span class="line">    -e SONAR_LOGIN=&quot;50b94782744687df5d5b04863b6a3c2198b3361a&quot; \</span><br><span class="line">    -v &quot;/home/CI/awesome/:/usr/src&quot; \</span><br><span class="line">    sonarsource/sonar-scanner-cli</span><br></pre></td></tr></table></figure>
<p>If everything goes well, you can find that all the findings are listed on the Sonarqube project board.</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_8.png" width="100%" height="100%">

<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_9.png" width="100%" height="100%">

<h2 id="Build-Job-amp-Sonar-Scanner-Combination"><a href="#Build-Job-amp-Sonar-Scanner-Combination" class="headerlink" title="Build Job &amp; Sonar Scanner Combination"></a>Build Job &amp; Sonar Scanner Combination</h2><p>To perform both cppcheck and Sonarqube scanning, you need to modify your container to include both of the tools.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -it --rm IMAGE_ID /bin/bash</span><br></pre></td></tr></table></figure>

<p>Install the cppcheck package in the container:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash-5.1# apk add cppcheck</span><br></pre></td></tr></table></figure>

<p>Commit your modified container from another terminal in order to perform the CI scanning task later:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker commit CONTAINER_ID modified/sonar-scanner-cli</span><br></pre></td></tr></table></figure>

<p>Create the <em>.gitlab-ci.yml</em> and edit the configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build-job:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apt</span> <span class="string">update</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apt</span> <span class="string">install</span> <span class="string">gcc</span> <span class="string">make</span> <span class="string">-y</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Starting up the building process!&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">make</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sonarqube-check:</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">modified/sonar-scanner-cli:latest</span></span><br><span class="line">    <span class="attr">entrypoint:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">variables:</span></span><br><span class="line">    <span class="attr">SONAR_USER_HOME:</span> <span class="string">&quot;/home/CI/awesome/.sonar&quot;</span>  <span class="comment"># Defines the location of the analysis task cache</span></span><br><span class="line">    <span class="attr">GIT_DEPTH:</span> <span class="string">&quot;0&quot;</span>  <span class="comment"># Tells git to fetch all the branches of the project, required by the analysis task</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">&quot;sonar ci&quot;</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.sonar/cache</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cppcheck</span> <span class="string">--xml</span> <span class="string">--xml-version=2</span> <span class="string">--enable=all</span> <span class="string">./</span> <span class="number">2</span><span class="string">&gt;</span> <span class="string">cppcheck-report.xml</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">sonar-scanner</span></span><br><span class="line">      <span class="string">-Dsonar.qualitygate.wait=true</span></span><br><span class="line">      <span class="string">-Dsonar.host.url=&quot;http://172.20.1.135:9000&quot;</span></span><br><span class="line">      <span class="string">-Dsonar.login=&quot;50b94782744687df5d5b04863b6a3c2198b3361a&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">allow_failure:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">merge_requests</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">develop</span></span><br></pre></td></tr></table></figure>
<p>Trigger the Gitlab CI pipeline and take a look at the status:</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_10.png" width="100%" height="100%">

<p>Furthermore, Sonarqube allows you to configure the quality gate conditions to decide what sort of code quality can pass the CI pipeline. </p>
<p>In this scenario, we’re gonna create the quality gate before the merge process, the merge request won’t succeed if the the status of the quality gate is failed. First of all, we need to choose the checkbox below to enable the merge check.</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_15.png" width="100%" height="100%">

<p>Create a new quelity gate and add a reliability rating condition which decides whether passing the merge or not.</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_11.png" width="100%" height="100%">

<p>Now create a new branch and try merging this new branch into master branch, the code owner will get a notification like this:</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_12.png" width="100%" height="100%">

<p>If the code scanning failed, the merge button will be in red. And you can find that the pipeline failed because it did not pass the quality gate.</p>
<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_13.png" width="60%" height="60%">

<img src="/2021/07/28/Sonar-Code-Quality-Gate-Integration-with-CI-Part-1/pic_14.png" width="100%" height="100%">

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a target="_blank" rel="noopener" href="https://docs.gitlab.com/runner/register/">https://docs.gitlab.com/runner/register/</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.gitlab.com/runner/executors/docker.html">https://docs.gitlab.com/runner/executors/docker.html</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.sonarqube.org/latest/setup/get-started-2-minutes/">https://docs.sonarqube.org/latest/setup/get-started-2-minutes/</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/">https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.sonarqube.org/latest/analysis/gitlab-integration/">https://docs.sonarqube.org/latest/analysis/gitlab-integration/</a></p>

    </div>

    
    
    
        

  <div class="followme">
    <p>Welcome to my other publishing channels</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/EVE_RWISE">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/sonarqube/" rel="tag"># sonarqube</a>
              <a href="/tags/sonar-scanner/" rel="tag"># sonar-scanner</a>
              <a href="/tags/Jenkins/" rel="tag"># Jenkins</a>
              <a href="/tags/Gitlab/" rel="tag"># Gitlab</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/25/Android-Anti-debugging-Tricks-Part-1/" rel="prev" title="Android Anti-debugging Tricks - Part 1">
      <i class="fa fa-chevron-left"></i> Android Anti-debugging Tricks - Part 1
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/08/04/Sonar-Code-Quality-Gate-Integration-with-CI-Part-2/" rel="next" title="Sonar Code Quality Gate Integration with CI - Part 2">
      Sonar Code Quality Gate Integration with CI - Part 2 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-Sonar"><span class="nav-number">1.</span> <span class="nav-text">Why Sonar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#About-CI"><span class="nav-number">2.</span> <span class="nav-text">About CI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Trigger-A-Gitlab-Pipeline-Separatly"><span class="nav-number">3.</span> <span class="nav-text">Trigger A Gitlab Pipeline Separatly</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Trigger-A-Jenkins-Pipeline-Separatly"><span class="nav-number">4.</span> <span class="nav-text">Trigger A Jenkins Pipeline Separatly</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Trigger-A-Sonar-Scanning-Task-Separatly"><span class="nav-number">5.</span> <span class="nav-text">Trigger A Sonar Scanning Task Separatly</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Build-Job-amp-Sonar-Scanner-Combination"><span class="nav-number">6.</span> <span class="nav-text">Build Job &amp; Sonar Scanner Combination</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">7.</span> <span class="nav-text">References</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="YHZ"
      src="/images/hive.gif">
  <p class="site-author-name" itemprop="name">YHZ</p>
  <div class="site-description" itemprop="description">LEARNING, TRAVELING, ENJOYING</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:recursively.z@gmail.com" title="E-Mail → mailto:recursively.z@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/EVE_RWISE" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;EVE_RWISE" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YHZ</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js"></script>
    <script defer src="//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_lines.min.js"></script>


  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '95efdfd7fd6efa56b483',
      clientSecret: '48c6d4d52267d502c9449ed5148fc5102df12362',
      repo        : 'recursively.github.io',
      owner       : 'recursively',
      admin       : ['recursively'],
      id          : '9f58d56ad7603abd71ebc0fbee8c6eb0',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
